---
title: "أطر البيانات (DataFrames)"
layout: post
category: learn r
description: تقديم لبيئة العمل العامة على آر تحتوي على منظومة الأوامر و كذا المكتبات
  ، تنصيبها و تشغيلها
img: "<img src=\"https://raw.githubusercontent.com/yOOs-dz/bayany.github.io/main/images/logo_Rtips.png\"
  width='100' height= auto/>"
---
في هذا المقال سنتعرف على إحدى أهم بنى المعلومات استعمالا و أهمية في آر و هي **أطر المعلومات.** و التي هي أكثر تركيبا من البنى السابقة كما أنها تعتبر عماد التحليل البياني. 

## فهرس

[أطر البيانات (DataFrames)](## أطر البيانات DataFrames)

1. [إنشاء إطار بيانات :](## 1. إنشاء إطار بيانات :)

2. [ الوصول إلى عناصر إطار البيانات](## **2. الوصول إلى عناصر إطار البيانات**)

  - [استخراج إطار بيانات فرعي مشكل من عمود](### **استخراج إطار بيانات فرعي مشكل من عمود**)

  - [استخراج بيانات مختلفة من إطار البيانات](### **استخراج بيانات مختلفة من إطار البيانات**)

    - [استخراج بيانات عمود من إطار البيانات](#### **استخراج بيانات عمود من إطار البيانات**)

    - [استخراج بيانات سطر من إطار البيانات](#### **استخراج بيانات سطر من إطار البيانات**)

    - [الوصول إلى قيمة بعينها باستعمال إحداثيات السطر و العمود](#### **الوصول إلى قيمة بعينها باستعمال إحداثيات السطر و العمود**)

3. [معلومات مختلفة عن أطر البيانات](## 3. معلومات مختلفة عن أطر البيانات)

  - [عناوين أعمدة أطر البيانات](### **عناوين أعمدة أطر البيانات**)

  - [عرض الأسطر الأولى لأطر البيانات](### **عرض الأسطر الأولى لأطر البيانات**)

  - [عرض الأسطر الأخيرة لأطر البيانات](### **عرض الأسطر الأخيرة لأطر البيانات**)

  - [الحصول على ملخص إحصائي لأطر البيانات](### **الحصول على ملخص إحصائي لأطر البيانات**)

  - [معرفة طبيعة المعطيات المشكلة لأطر البيانات](### **معرفة طبيعة المعطيات المشكلة لأطر البيانات**)

  - [معرفة أبعاد أطر البيانات](### **معرفة أبعاد أطر البيانات**)

4. [بعض العمليات على أطر البيانات](## ** 4. بعض العمليات على أطر البيانات**)

  - [إضافة أعمدة](#### 1. إضافة أعمدة) 

  - [إضافة أسطر](### 2. إضافة أسطر)

  - [إدراج و تغيير بيانات](### إدراج و تغيير بيانات)

  - [حذف بيانات](### حذف بيانات)

  - [عمليات على بيانات](### عمليات على بيانات)

  - [استخراج إطر بيانات جزئية](### استخراج إطر بيانات جزئية)

  - [تحويل أطر البيانات إلى بنى معلومات أخرى](### تحويل أطر البيانات إلى بنى معلومات أخرى)

[خاتمة](## خاتمة)



## أطر البيانات (DataFrames)

أطر البيانات هي **بنى بيانات ثنائية الأبعاد**  مشكلة من جداول بأسطر و أعمدة حيث يمكن أن يحتوي على أنواع بيانات مختلفة في كل عمود. أطر المعلومات مرتكزة في بنيتها على القوائم و تشترك في صفات عديدة معها في فهرستها. هي كذلك تحمل صفات شكلية للمصفوفات في تنظيمها ثنائي البعد إلا أنها تقبل أعمدة من طبائع مختلفة. يمكن تشكيلها من مجموعات من المتغيرات. تعتبر أطر البيانات أهم بنية تعتمد عليها أغلب أنظمة النمذجة في آر. 

## 1. إنشاء إطار بيانات :

تنشؤ أطر البيانات وفق الأمر ```data.frame()```  حيث تثبت بها مختلف الأعمدة المكونة لإطار البيانات متبوعة إن لزم الأمر بوسائط أخرى حول كيفية التعامل مع طبائع المعطيات المختلفة و القيم المعدومة و غيرها. يمكن التعمق أكثر بقراءة التوثيق الرسمي عبر الأمر : 
```
?data.frame
```

في المثال المقبل ، ننشئ إطار بيانات نعطيه اسم ```my_dataframe``` و نضمنه معلومات شخصية عن أعضاء ناد ثقافي صغير حيث تكون المعلومات حول الاسم ، العمر و مدينة الميلاد مثلا. هاته المعلومات مضمنة في المتغيرات ```الاسم```، ```العمر``` و ```المدينة``` التي نعرفها أثناء إنشاء إطار البيانات





```
my_dataframe <- data.frame(
  الاسم = c("أحمد", "فاطمة", "خالد"),
  العمر = c(25, 30, 28),
  المدينة = c("الجزائر", "تونس", "الرباط")
)

# طباعة إطار البيانات
print(my_dataframe)
```

## **2. الوصول إلى عناصر إطار البيانات**

للوصول و تحديد قيم  أو متغيرات بعينها في أطر البيانات ،يمكن استعمال عدة طرق. قد يتعلق الأمر باستخراج إطار بيانات فرعي من الأول مشكل من عمود أو مجموعة أعمدة مثلا و قد يتعلق الأمر باستخراج معطيات عمود بعينه أو سطر بعينه أو مجموعة من الأعمدة و الأسطر كما قد يتعلق الأمر باستخراج معطيات بعينها من الجدول. سنبين هنا بعضا من طرق الحصول على هاته المعلومات :

### **استخراج إطار بيانات فرعي مشكل من عمود**

يمكن الوصول إلى معطيات بعينها عبر استخراج إطر بيانات فرعي من الإطار الأول و ذلك باستعمال رقم ترتيب الأعمدة المراد استخراجها. في حالة عمود واحد نستعمل الصيغة ```dataframe[2]```  و أما في حالة مجموعة من الأعمدة ، ندرجها في متجه وفق الصيغة التالية ```dataframe[c(1,2,4)]```

هنا مثال عن استخراج إطار بيانات فرعي من الإطار السابق ```my_dataframe``` ، باعتماد العمود رقم ```[2]```

```
my_dataframe[2]

# العمر
1    25
2    30
3    28
```
أو باستخراج إطار بيانات فرعي مشكل من مجموعة أعمدة. مثلا العمود ```[1]``` و العمود ```[3]``` :


```
my_dataframe[c(1,3)]

#الاسم المدينة
#1  أحمد الجزائر
#2 فاطمة    تونس
#3  خالد  الرباط
```

في كلتا الحالتين ، طبيعة النتيجة هي إطار معلومات جديد. يمكن التأكد من ذلك عبر تحديد نوع المعطى باستعمال أمر ```class()```و الذي كنا تعرضنا إليه في المقال السابق كما يمكن تخزين النتيجة في متغير جديد و ستكون طبيعته هي إطار بيانات :

```
new_dataframe <- my_dataframe[c(1,3)]
class(new_dataframe)

# [1] "data.frame"
```


### **استخراج بيانات مختلفة من إطار البيانات**

قد يكون الهدف هو الوصول إلى معطيات بعينها دون الحاجة إلى إنشاء إطار بيانات جديد و لكن بغرض استخراجها ، عرضها أو معالجتها كبيانات منفردة. 

#### **استخراج بيانات عمود من إطار البيانات**


يمكن استعمال الصيغ التالية لاستخراج بيانات عمود بعينه :

1. عبر تحديد اسم العمود المعني باعتماد الصيغة ```dataframe$column_name``` 

```
my_dataframe$العمر   

#[1] 25 30 28
```


2. أو عبر تحديد ترتيبه في الجدول باعتماد الصيغة ```dataframe[,3]```. في هذا الخصوص ، الفاصلة ```,```التي تسبق رقم الترتيب تشير إلى فكرة الإحداثيات **[x,y]** حيث الأعمدة تشير إلى الإحداثيات العمودية **y** أو *الترتيب* :

```
my_dataframe[,3]

#[1] "الجزائر" "تونس"    "الرباط" 

```

لاحظ أنه في كلتا الحالتين السابقتين ، فإن طبيعة بيانات النتيجة هي عبارة عن متجه مشكل من قيم العمود المطلوب. يمكنك التأكد من ذلك دائما عبر أمر ```class()``` .

#### **استخراج بيانات سطر من إطار البيانات**

من أجل استخراج معطيات سطر بعينه ، تكتب الصيغة باستعمال رقم ترتيبه متبوعا بفاصلة كما يلي ```dataframe[2,]```. كتابة رقم الترتيب قبل الفاصلة تشير إلى إحداثيات السطر كالأفقية **x** ضمن نظام إحداثيات إطار البيانات **[x,y]** :


```

my_dataframe[2, ]
# الاسم العمر المدينة
#2 فاطمة    30    تونس
```

لاحظ هنا أن طبيعة النتيجة و لأن بيانات سطر واحد قد تحتوي أكثر من نوع من المعطيات ، فإن الأسطر تخزن كقوائم و ليست متجهات. يمكنك التأكد من ذلك دائما عبر الأمر ```class()``` :

```
class(my_dataframe[2, ])
```



##### **الوصول إلى قيمة بعينها باستعمال إحداثيات السطر و العمود**

بنفس منطق ما تم أعلاه، تستعمل إحداثيات السطر و العمود لتحديد معطيات بعينها وفق الصيغة ```dataframe[2,3]```

```
my_dataframe[2,3]

#[1] "تونس"
```
كما يمكن استعمال ترتيب القيمة المطلوبة ضمن العمود الذي تنتمي إليه وفق الصيغة ```dataframe$column[2]``` :
 
```
my_dataframe$المدينة[2]
#[1] "تونس"
```


## 3. معلومات مختلفة عن أطر البيانات

سنتعرض في هاته الفقرة إلى مجموعة أوامر تعطينا معلومات عن أطر البيانات تساعدنا في فهم معطياتها و معالجتها.

### **عناوين أعمدة أطر البيانات**

قد نحتاج في معالجتنا الإحضائية الحصول على عناوين أو أسماء أعمدة أطر البيانات. لهذا الغرض يمكننا استعمال الأمر ```names(dataframe)``` و الذي يعيد لنا متجها يحوي أسماء العناوين.

```
names(my_dataframe)
# [1] "الاسم"   "العمر"   "المدينة"
```
يمكن استعمال هاته التعليمة في تغيير أسماء الأعمدة كما سنرى في الفقرات المقبلة.


### **عرض الأسطر الأولى لأطر البيانات**

من بين التعليمات المستعملة كثيرا و المفيدة أثناء العمل هي تعليمة ```head(dataframe)``` و التي تسمح بقراءة أولى عشرة أسطر من إطار البيانات بحيث تعطينا فكرة عن محتوى الإطار ، خاصة بعد إجراء أي تعديل.
```
head(my_dataframe)
```

##### **عرض الأسطر الأخيرة لأطر البيانات**

كذلك ، من بين التعليمات المستعملة كثيرا و المفيدة أثناء العمل للتأكد خاصة من اكتمال كل البيانات في إطار المعلومات تعليمة ```tail(dataframe)``` و التي تسمح بالاطلاع على آخر عشرة أسطر من إطار البيانات.

```
tail(my_dataframe)
```

### **الحصول على ملخص إحصائي لأطر البيانات**

تعليمة ```summary(dataframe)``` و التي اطلعنا عليها على مستوى المتجهات تعتبر كذلك من أهم الوظائف التي تسمح لنا بالحصول على فكرة عن الطبيعة الإحصائية للبيانات حيث تبرز لنا لكل عمود في الإطار مجموعة معطيات مثل المعدل ، القيمة المتوسطة ، القيمة الأدنى و الأقصى و كذلك قيم الأرباع الأول و الثالث (طبعا الربع الثاني هو القيمة المتوسطة و الربع الرابع هو القيمة الأعلى).


```
summary(my_dataframe)

    الاسم               العمر         المدينة         
 Length:3           Min.   :25.00   Length:3          
 Class :character   1st Qu.:26.50   Class :character  
 Mode  :character   Median :28.00   Mode  :character  
                    Mean   :27.67                     
                    3rd Qu.:29.00                     
                    Max.   :30.00 

```

يالنسبة للمتغير - إطار البيانات **my_dataframe** ، يشير الملخص الإحصائي للعمود **العمر** أن متوسط *mean* العمر لقائمتنا هو *27.67* سنة و أن القيمة المتوسطة *median* هي *28* سنة إلى غيرها من المعطيات. 

بالنسبة للعمودين **الاسم** و **المدينة** و هما عمودان يحملان معطيات حروفية فالملخص يعطي لنا ثلاثة معلومات ؛ أولا، طول *length* المتجه و هو *3* و أن نوع المعطى العام *mode هو *character و أن صنفه *class*  *character*.

##### **الحصول على طبيعة المعطيات المشكلة لأطر البيانات**

يمكن كذلك الحصول على نظرة على إطار البيانات عبر قراءة معطيات أولى و التعرف على طبيعتها باستعمال الأمر  ```str(dataframe)``` . هاته الخاصية مفيدة جدا، خاصة في حالة الجداول الكبيرة و من أجل التأكد من قراءة البرنامج الصحيحة لصحة البيانات حيث أنه قد يحدث مثلا لسبب ما أن تسجل القيم العددية كسلاسل حروف. لذا ، فإنه يمكن التعرف على طبيعة بيانات أعمدة أي إطار بيانات باستعمال هذا الأمر و التي تعرض برموز حرورفها المميزة مثل *chr* للدلالة على السلاسل الحروفية ، *num* للدلالة على القيم العددية. أنظر المثال التالي.

```
str(my_dataframe)

#'data.frame':	3 obs. of  3 variables:
# $ الاسم  : chr  "أحمد" "فاطمة" "خالد"
# $ العمر  : num  25 30 28
# $ المدينة: chr  "الجزائر" "تونس" "الرباط"
```
لاحظ أن وظيفة ```str()``` و التي تستعمل لمختلف أنواع المتغيرات تبين نوع المتغير في سطرها الأول حيث أبرزت لنا أن ```my_dataframe``` هو إطار بيانات ```'data.frame'``` كما تعطي لنا معلومات عن شكله حيث أن إطار بياناتنا مشكل من ثلاثة **متغيرات - variables** (أي التسمية الإحصائية للأعمدة) و ثلاثة **مشاهدات-observations** (التسمية الإحصائية للأسطر). 

### **معرفة أبعاد أطر البيانات**

إذا أردنا الحصول فقط على معلومات شكل إطار البيانات ، أي عدد الأعمدة و الأسطر ، يمكن مباشرة استعمال التعليمة ```dim(dataframe)``` و التي تعيد نتيجة على شكل متجه من عددين ، الأول للأسطر و الثاني للأعمدة.

```
dim(my_dataframe)

#[1] 3 3
```
النتيجة المعروضة تبين لنا متجها من عددين ، الأول *3* يعني الأسطر و الثاني *3* يعني الأعمدة.

## ** 4. بعض العمليات على أطر البيانات**

بعد التعرض إلى مجموعة من التعليمات التي تعلمنا عن خصائص في شكل و المحتوى الإحصائي لأطر البيانات ، سنتعرض هنا إلى تحرير أطر البيانات ، و بالأخص كيفية إدراج بيانات وتغييرها أو حذفها و إضافة أعمدة أو أسطر ، استخراج أطر بيانات فرعية ، تغيير أسماء الأعمدة (المتغيرات) أو الأسماء و كذا تحويل أطر البيانات إلى بنى أخرى مثل المصفوفات أو القوائم.

### إدراج و تغيير بيانات

سنتعرض هنا كيفيات مختلفة إلى إدراج بيانات و تغييرها في أطر البيانات و ذلك عبر عدة طرق و ووفق أهداف متعددة :

#### 1. إضافة أعمدة 

كثيرا ما يحتاج محلل البيانات لإضافة أسطر إلى جدوله أو إطار البيانات الذي يشتغل عليه. لهذا الغرض يمكنه إنشاء متغيرات جديدة بشكل مستقل لنفس المشاهدات الخاصة بجدوله (أي بنفس عدد الأسطر) ثم يضيفها إلى إطار بيانه أو إلى إطار بيانات جديد عبر الوظيفة ```()cbind``` و التي هي اختصار لكلمة **column bind** و باستعمال الصيغة التالية ```dataframe <- cbind(dataframe, new_variable(value1, value2, ...))```. يمكن كذلك استعمال الوظيفة ```cbind.data.frame()``` مكان ```()cbind``` . 

تجد أسفله مثالا حول إطار البيانات السابق الذي اشتغلنا عليه حيث سنضيف متغير جديد بعنوان ```المهنة``` ثم نضمه إلى إطار البيانات ```my_dataframe``` و نحفظ المعطيات المحينة في إطار بيانات جديد هو ```update1_my_df``` :
```

المهنة <- c("التعليم","الطب","المعمار")

update1_my_df <- cbind(my_dataframe,المهنة) #تحديث إطار البيانات بإضافة عمود المهنة
print(update1_my_df)

# الاسم العمر المدينة  المهنة
#1  أحمد    25 الجزائر التعليم
#2 فاطمة    30    تونس    الطب
#3  خالد    28  الرباط المعمار
```



#### 2. إضافة أسطر 

في نفس الإطار ، يمكننا إضافة مشاهدات جديدة لإطار البيانات باستعمال الأمر ```rbind()``` أو ```rbind.data.frame()``` و التي هي اختصار لعبارة **row bind** عبر إدراج المشاهدات الجديدة في متغير جديد على شكل قائمة أو متجه معنون بعنوان المشاهدة ثم نربطه بإطار البيانات الأول بالصيغة ```rbind(dataframe, new_variable(value1, value2, ...))```. 

في المثال الأتي سنعمل على إضافة مشاهدة جديدة و هي الخاصة بعضو جديدة اسمها *سليمة* و هي مقاولة من القاهرة عمرها 45 سنة. نستعمل هنا أمر ```rbind()``` . و لكن قبيل ذلك يجب أولا تعريف المتغير ```salima``` الذي يحمل معلومات العضو الجديدة. نختار هنا أن نضيف هذا المتغير على شكل **قائمة-list** أي بالصيغة ```list()```و هذا بغرض المحافظة على طبيعة البيانات المختلفة حين إضافته إلى إطار البيانات. 


```
salima<-list("سليمة",45,"القاهرة","المقاولة")
```

بعد ذلك ، نضيف المتغير ```salima``` إلى إطار البيانات المحين ```update1_my_df``` بتحديثه و حفظه في إطار جديد هو ```update2_my_df``` كما يلي :

```
update2_my_df <- rbind(update1_my_df,salima)

print(update2_my_df)
#  الاسم العمر المدينة   المهنة
#1  أحمد    25 الجزائر  التعليم
#2 فاطمة    30    تونس     الطب
#3  خالد    28  الرباط  المعمار
#4 سليمة    45 القاهرة المقاولة
```

لاحظ أن بيانات العضو الجديد قد أضيفت أسفل الجدول. 

يمكن التأكد من أن طبيعة البيانات بقيت على حالها بعد هذه الإضافة و ذلك بالأمر الذي رأيناه أعلاه و هو ```str(dataframe)``` :

```
str(update2_my_df)
#'data.frame':	4 obs. of  4 variables:
# $ الاسم  : chr  "أحمد" "فاطمة" "خالد" "سليمة"
# $ العمر  : num  25 30 28 45
# $ المدينة: chr  "الجزائر" "تونس" "الرباط" "القاهرة"
# $ المهنة : chr  "التعليم" "الطب" "المعمار" "المقاولة"
```
لاحظ هنا أن كل البيانات حافظت على طبيعتها حيث المتغيرات *الاسم* ، *المدينة* و *المهنة* هي سلاسل حروف أما االمتغير *العمر* بقي متغيرا عدديا.


يمكن كذلك تعريف معطيات العضو الجديد بإدخاله كمتجه و ليس كقائمة ، أي بالصيغة ```variable <- c(value1, value2, value 3 , ...) ```. في هذه الحالة سيتم تحويل جبري (**coercition**) لكل المعطيات الموجودة إلى سلاسل حروف سواءا ضمن المتجه أو حتى في إطار البيانات بعد الإضافة و هو الأمر الذي يستلزم إعادة تحويل البيانات العددية إلى أصلها كبيانات عددية. سنتناول هاته الإشكالية في آخر هذا المقال.


```

```


```

```


### حذف بيانات


### عمليات على بيانات


### استخراج إطر بيانات جزئية



### تحويل أطر البيانات إلى بنى معلومات أخرى





---

## خاتمة
تعلمنا في هذا المقال عن هياكل البيانات الأساسية في R وكيفية التعامل معها. كل هيكل بيانات له استخداماته الخاصة التي تجعله مناسبًا لأنواع معينة من التحليل. يمكن تجربة هذه الأمثلة في RStudio لاكتساب فهم أعمق.
